<script type="application/ld+json">
	{
	  "@context": "https://schema.org",
	  "@type": "CollectionPage",
	  "@id": "{{ canonical_url }}#collectionpage",
	  "mainEntityOfPage": {
		"@type": "WebPage",
		"@id": "{{ canonical_url }}"
	  },
	  "isPartOf": {
		"@type": "WebSite",
		"name": "{{ shop.name }}",
		"url": "{{ shop.url }}"
	  },
	  "name": "{{ collection.title | escape }}",
	  "description": "{{ collection.description | strip_html | newline_to_br | strip_newlines | replace: '<br />', ' : ' | truncate: 150 | default: 'Available: All Sizes' }}",
	  "image": "https:{{ collection.image | img_url: 'large' }}",
	  "offers": {
		"@type": "AggregateOffer",
		"offerCount": "{{ collection.products_count }}",
		"lowPrice": "{{ collection.products | map: 'price' | sort | first | money_without_currency | remove: ',' }}",
		"highPrice": "{{ collection.products | map: 'price' | sort | last | money_without_currency | remove: ',' }}",
		"priceCurrency": "{{ shop.currency }}"
	  },
	  "numberOfItems": {{ collection.products_count }},
	  "hasPart": [
		{
		  "@type": "WebPageElement",
		  "name": "Hero Image",
		  "description": "A large banner image showcasing featured Afghan rugs from the collection",
		  "image": "https:{{ collection.featured_image }}"
		},
		{
		  "@type": "WebPageElement",
		  "name": "Product Grid",
		  "description": "A grid layout displaying Afghan rugs in this collection, each with an image, title, price, and quick-view option"
		},
		{
		  "@type": "WebPageElement",
		  "name": "Shopping Information",
		  "description": "Detailed information about Afghan rugs, custom options, shipping, and return policies."
		},
		{
		  "@type": "WebPageElement",
		  "name": "Blog Posts",
		  "description": "Learn more about the art of Afghan Rugs through our blog posts."
		}
	  ],
	  "mainEntity": {
		"@type": "ItemList",
		"name": "Product Grid",
		"description": "Grid display of Afghan rugs available in this collection.",
		"numberOfItems": {{ collection.products_count }},
		"itemListElement": [
		  {% for product in collection.products limit:10 %}
		  {
			"@type": "Product",
			"position": {{ forloop.index }},
			"name": {{ product.title | json }},
			"image": "https:{{ product.featured_image | img_url: 'large' }}",
			"description": {{ product.description | strip_html | truncatewords: 30 | json }},
			"url": "{{ product.url | absolute_url }}",
			"offers": {
			  "@type": "Offer",
			  "price": "{{ product.price | money_without_currency | remove: ',' }}",
			  "priceCurrency": "{{ shop.currency }}",
			  "availability": "https://schema.org/{{ product.available | default: "InStock" }}"
			}
		  }{% unless forloop.last %},{% endunless %}
		  {% endfor %}
		]
	  }
	}
	</script>