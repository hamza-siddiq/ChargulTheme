{{ 'breadcrumbs.css' | asset_url | stylesheet_tag: defer:true }}
<scroll-shadow>
  <nav class="breadcrumbs" aria-label="breadcrumbs">
    <a href="{{ routes.root_url }}" title="{{ 'breadcrumbs.home' | t | escape }}">{{ 'breadcrumbs.home' | t }}</a>
    
    {% if template contains 'product' %}
      {% assign breadcrumb_handle = product.metafields.custom.breadcrumb %}
      <i>/</i>
      <a href="/collections/afghan-rugs" title="{{ 'breadcrumbs.shop' | t | escape }}">{{ 'breadcrumbs.shop' | t }}</a>
      {% if breadcrumb_handle != blank %}
        {% assign formatted_handle = breadcrumb_handle | handle %}
        <i>/</i>
        <a href="{{ routes.collections_url }}/{{ formatted_handle }}" title="{{ breadcrumb_handle | escape }}">{{ breadcrumb_handle }}</a>
      {% elsif collection.url %}
        <i>/</i>
        <a href="{{ collection.url }}" title="{{ collection.title | escape }}">{{ collection.title }}</a>
      {% endif %}
      <i>/</i>
      {{ product.title }}
    {% else %}
      {% if collection.url %}
        <i>/</i>
        <a href="/collections/afghan-rugs" title="{{ 'breadcrumbs.shop' | t | escape }}">{{ 'breadcrumbs.shop' | t }}</a>
        {% unless collection.handle == 'afghan-rugs' %}
          <i>/</i>
          <a href="{{ collection.url }}" title="{{ collection.title | escape }}">{{ collection.title }}</a>
        {% endunless %}
      {% endif %}
      {% if template contains 'cart' %}
        <i>/</i>
        {{ 'breadcrumbs.cart' | t }}
      {% endif %}
      {% if template contains 'blog' %}
        {% if current_tags %}
          <i>/</i>
          <a href="{{ blog.url }}" title="{{ blog.title | escape }}">{{ blog.title }}</a>
          <i>/</i>
          {{ current_tags }}
        {% else %}
          <i>/</i>
          {{ blog.title }}
        {% endif %}
      {% endif %}
      {% if template contains 'article' %}
        <i>/</i>
        <a href="{{ blog.url }}" title="{{ blog.title | escape }}">{{ blog.title }}</a>
        <i>/</i>
        {{ article.title }}
      {% endif %}
      {% if template contains 'page' %}
        <i>/</i>
        {{ page.title }}
      {% endif %}
      {% if template contains 'search' %}
        <i>/</i>
        {{ 'breadcrumbs.search' | t }}
      {% endif %}
      {% if template contains 'customers' %}
        <i>/</i>
        {{ 'breadcrumbs.my_account' | t }}
      {% endif %}
    {% endif %}
  </nav>
  {% render 'breadcrumbs-schema' %}
</scroll-shadow>